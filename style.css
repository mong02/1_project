/* ============================================================
 *  AI Blog Generator - Main Stylesheet
 *  Version: 1.0.0
 * ============================================================ */

/* ============================================================
 *  1. FONT IMPORTS
 * ============================================================ */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

/* ============================================================
 *  2. GLOBAL VARIABLES (:root)
 *  - 색상, 폰트, 간격 등의 Design Token 정의
 *  - 여기만 수정하면 전체 테마가 변경됨
 * ============================================================ */
:root {
    /* Primary Colors */
    --primary-color: #624AFF;
    /* 메인 포인트 컬러 (Periwinkle Purple) */
    --primary-hover: #5039D1;
    /* Primary 호버 색상 */
    --primary-light: #F8F7FF;
    /* Primary 연한 배경 */

    /* Background Colors */
    --bg-light-purple: #F0F0FF;
    --bg-card: #FAFAFF;
    --bg-analysis: #F2F5FF;
    /* 분석 결과 배경 */
    --bg-white: #FFFFFF;

    /* Border Colors */
    --border-color: #E0E0E0;
    --border-light: #EDEDED;
    --border-purple: #EBE4FF;
    --border-dashed: #D6D6FF;
    --border-analysis: #E8EBF2;

    /* Text Colors */
    --text-primary: #1A1A1A;
    --text-secondary: #666666;
    --text-muted: #8E8E8E;
    --text-placeholder: #BBBBBB;
    --text-purple-blue: #4C51BF;
    --text-purple-header: #5D5CDE;

    /* Shadow */
    --card-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    --btn-shadow: 0 4px 12px rgba(98, 74, 255, 0.2);
    --title-btn-shadow: 0 4px 10px rgba(0, 0, 0, 0.03);

    /* Spacing */
    --spacing-xs: 6px;
    --spacing-sm: 12px;
    --spacing-md: 20px;
    --spacing-lg: 24px;
    --spacing-xl: 30px;

    /* Border Radius */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 18px;
    --radius-pill: 20px;
    --radius-full: 40px;

    /* Typography */
    --font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    --font-size-sm: 0.85rem;
    --font-size-base: 1rem;
    --font-size-md: 1.05rem;
    --font-size-lg: 1.15rem;
    --font-size-xl: 1.3rem;
    --font-size-2xl: 2.2rem;
}

/* ============================================================
 *  3. BASE / GLOBAL STYLES
 * ============================================================ */
.stApp {
    font-family: var(--font-family);
}

/* ============================================================
 *  4. STREAMLIT COMPONENT OVERRIDES
 *  - Streamlit 기본 컴포넌트(data-testid) 스타일 오버라이드
 * ============================================================ */

/* -------------------------
 *  4.1 Container / Card Wrapper
 * ------------------------- */
div[data-testid="stVerticalBlockBorderWrapper"] {
    border: 1px solid var(--border-light) !important;
    border-radius: var(--radius-lg) !important;
    padding: var(--spacing-lg) !important;
    background-color: var(--bg-white) !important;
    box-shadow: var(--card-shadow) !important;
    margin-bottom: var(--spacing-md) !important;
}

/* -------------------------
 *  4.2 Pills / Segmented Control (st.pills)
 *  - Streamlit의 Pills 컴포넌트 스타일링
 * ------------------------- */
div[data-testid="stPills"] button {
    border: 1px solid var(--border-light) !important;
    background-color: var(--bg-white) !important;
    color: var(--text-secondary) !important;
    padding: 8px 16px !important;
    border-radius: var(--radius-pill) !important;
    font-size: 0.95rem !important;
    font-weight: 500 !important;
    transition: all 0.2s ease !important;
}

div[data-testid="stPills"] button[aria-selected="true"] {
    border: 1px solid var(--primary-color) !important;
    background-color: var(--primary-color) !important;
    color: rgb(255, 255, 255) !important;
    font-weight: 600 !important;
}

div[data-testid="stPills"] button:hover {
    border-color: var(--primary-color) !important;
    color: var(--primary-color) !important;
    background-color: var(--primary-light) !important;
}

/* -------------------------
 *  4.2.1 General Button Styling (st.button)
 *  - 일반 Streamlit 버튼 기본 스타일
 * ------------------------- */
div[data-testid="stButton"] button {
    border: 1px solid var(--border-light) !important;
    background-color: var(--bg-white) !important;
    color: var(--text-secondary) !important;
    padding: 8px 16px !important;
    border-radius: var(--radius-pill) !important;
    font-size: 0.95rem !important;
    font-weight: 500 !important;
    transition: all 0.2s ease !important;
}

div[data-testid="stButton"] button:hover {
    border-color: var(--primary-color) !important;
    color: var(--primary-color) !important;
    background-color: var(--primary-light) !important;
}

/* -------------------------
 *  4.3 Primary Button
 * ------------------------- */
button[kind="primary"] {
    background-color: var(--primary-color) !important;
    color: white !important;
    border: none !important;
    border-radius: 10px !important;
    padding: 12px 24px !important;
    font-weight: 600 !important;
    transition: all 0.3s ease !important;
}

button[kind="primary"]:hover {
    background-color: var(--primary-hover) !important;
    transform: translateY(-1px);
    box-shadow: var(--btn-shadow);
}

/* -------------------------
 *  4.4 File Uploader
 * ------------------------- */
div[data-testid="stFileUploader"] section {
    background-color: var(--bg-card) !important;
    border: 2px dashed var(--border-dashed) !important;
    border-radius: var(--radius-md) !important;
    padding: var(--spacing-md) !important;
}

/* -------------------------
 *  4.5 Text Input
 * ------------------------- */
div[data-testid="stTextInput"] input {
    border-radius: var(--radius-md) !important;
    border: 1px solid var(--border-purple) !important;
    padding: 12px 20px !important;
    font-size: var(--font-size-base) !important;
    background-color: var(--bg-card) !important;
    color: #333 !important;
}

div[data-testid="stTextInput"] input::placeholder {
    color: var(--text-placeholder) !important;
}

/* -------------------------
 *  4.6 Selectbox
 * ------------------------- */
div[data-testid="stSelectbox"] div[data-baseweb="select"]>div {
    border-radius: var(--radius-md) !important;
    border: 1px solid var(--border-purple) !important;
    background-color: var(--bg-card) !important;
    padding: 2px 4px !important;
}

/* -------------------------
 *  4.7 TextArea
 * ------------------------- */
div[data-testid="stTextArea"] textarea {
    border-radius: var(--radius-md) !important;
    border: 1px solid var(--border-purple) !important;
    background-color: var(--bg-card) !important;
    padding: 12px 20px !important;
    font-size: var(--font-size-base) !important;
    color: #333 !important;
}

/* -------------------------
 *  4.8 Expander
 * ------------------------- */
div[data-testid="stExpander"] {
    border: 1px solid var(--bg-light-purple) !important;
    border-radius: var(--radius-md) !important;
    background-color: var(--bg-white) !important;
    box-shadow: none !important;
}

div[data-testid="stExpander"] summary {
    font-weight: 600 !important;
    color: var(--primary-color) !important;
}

/* ============================================================
 *  5. LAYOUT - CATEGORY & GRID CONTAINERS
 *  - 카테고리, 그리드 시스템 등 Marker 기반 레이아웃
 * ============================================================ */

/* 카테고리 전용 컨테이너 (흰색 배경) */
div[data-testid="stVerticalBlock"]:has(> div:first-child .category-marker) {
    background-color: var(--bg-white) !important;
    border: 1px solid var(--border-purple) !important;
    border-radius: var(--radius-lg) !important;
    padding: var(--spacing-lg) !important;
    margin-bottom: var(--spacing-md) !important;
}

/* 카테고리 3열 그리드 적용 (Pills 컴포넌트용) */
div[data-testid="stVerticalBlock"]:has(.category-grid-marker) div[data-testid="stPills"]>div {
    display: grid !important;
    grid-template-columns: repeat(3, 1fr) !important;
    gap: var(--spacing-sm) !important;
}

/* 카테고리 Pills 버튼 스타일 강화 */
div[data-testid="stVerticalBlock"]:has(.category-grid-marker) div[data-testid="stPills"] button {
    border: 1px solid var(--border-purple) !important;
    border-radius: var(--radius-md) !important;
    padding: 12px 10px !important;
}

/* ============================================================
 *  6. AI RECOMMENDATION SECTION
 *  - AI 추천 주제 영역 (연보라 배경)
 * ============================================================ */
div[data-testid="stVerticalBlock"]:has(> div:first-child .reco-marker) {
    background-color: var(--bg-analysis) !important;
    border: 1px solid var(--border-analysis) !important;
    border-radius: var(--radius-xl) !important;
    padding: 24px 30px !important;
    margin-top: 15px !important;
    margin-bottom: 30px !important;
}

.reco-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 18px;
    padding: 0;
}

.ai-close-btn {
    color: #ADB5BD;
    cursor: pointer;
    font-size: 1.4rem;
    font-weight: 300;
}

/* 닫기 버튼 전용 스타일 */
div.reco-header-container button {
    background: transparent !important;
    border: none !important;
    color: #AAA !important;
    padding: 0 !important;
    font-size: 1.2rem !important;
    line-height: 1 !important;
    min-width: 20px !important;
    width: 20px !important;
    height: 20px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

div.reco-header-container button:hover {
    color: var(--text-secondary) !important;
    background: rgba(0, 0, 0, 0.05) !important;
    border-radius: 50% !important;
}

/* ============================================================
 *  7. TITLE CANDIDATE BUTTONS
 *  - 추천 제목 버튼 (알약 형태)
 * ============================================================ */
div.title-candidate-wrapper {
    margin-bottom: var(--spacing-sm) !important;
}

div.title-candidate-wrapper button {
    background-color: var(--bg-white) !important;
    border: 1px solid #E6E9FC !important;
    border-radius: var(--radius-full) !important;
    padding: 14px 28px !important;
    text-align: left !important;
    justify-content: flex-start !important;
    color: var(--text-purple-blue) !important;
    font-size: var(--font-size-md) !important;
    font-weight: 500 !important;
    width: auto !important;
    max-width: 100% !important;
    box-shadow: var(--title-btn-shadow) !important;
    transition: all 0.2s ease !important;
}

div.title-candidate-wrapper button:hover {
    border-color: var(--primary-color) !important;
    background-color: var(--bg-white) !important;
    box-shadow: 0 6px 15px rgba(98, 74, 255, 0.08) !important;
    transform: translateY(-1px);
}

/* ============================================================
 *  8. ANALYSIS RESULT SECTION
 *  - 분석 결과 컨테이너
 * ============================================================ */
div[data-testid="stVerticalBlock"]:has(> div:first-child .analysis-marker) {
    background-color: var(--bg-analysis) !important;
    border: 1px solid var(--border-analysis) !important;
    border-radius: var(--radius-xl) !important;
    padding: 24px 30px !important;
    margin-bottom: var(--spacing-md) !important;
}

/* 흰색 추천 주제 카드 (분석 결과 내부) */
div[data-testid="stVerticalBlock"]:has(> div:first-child .recommendation-marker) {
    background-color: var(--bg-white) !important;
    border: 1px solid var(--border-purple) !important;
    border-radius: var(--radius-md) !important;
    padding: 10px 18px !important;
    margin-top: 0px !important;
}

/* 제목적용 버튼 정렬 */
div[data-testid="column"]:has(button[key*="apply_mood_title_final"]) {
    display: flex;
    justify-content: flex-end;
    align-items: center;
}

button[key*="apply_mood_title_final"] {
    width: 100% !important;
    max-width: 120px !important;
    padding: 6px 12px !important;
    border-radius: var(--radius-pill) !important;
}

/* ============================================================
 *  9. TITLE INPUT SECTION
 *  - 글 제목 입력 전용 스타일 (강조)
 * ============================================================ */
.title-input-container div[data-testid="stTextInput"] input {
    font-size: 18pt !important;
    font-weight: 700 !important;
    color: #444444 !important;
    background-color: var(--bg-white) !important;
    padding-top: 25px !important;
    padding-bottom: 25px !important;
    padding-left: 0px !important;
    border: none !important;
    border-bottom: 2px solid #EEEEEE !important;
    border-radius: 0px !important;
}

.title-input-container div[data-testid="stTextInput"] input:focus {
    border-bottom: 2px solid var(--primary-color) !important;
    box-shadow: none !important;
}

.title-input-container div[data-testid="stTextInput"] input::placeholder {
    color: #CCCCCC !important;
    font-weight: 700 !important;
}

/* ============================================================
 *  10. CUSTOM UI COMPONENTS
 *  - 커스텀 클래스 기반 컴포넌트들
 * ============================================================ */

/* 중앙 정렬 헤더 */
.centered-header {
    text-align: center;
    margin-bottom: 30px;
}

.centered-header h2 {
    font-size: var(--font-size-2xl);
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 10px;
}

.centered-header p {
    color: var(--text-secondary);
    font-size: 1.1rem;
}

/* 섹션 라벨 (아이콘 포함) */
.icon-label {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    font-weight: 600;
    color: var(--text-muted) !important;
    font-size: var(--font-size-lg) !important;
    margin-bottom: 15px !important;
    letter-spacing: -0.01em;
}

/* 하단 뒤로가기 버튼 */
div.back-btn-container {
    display: flex;
    justify-content: center;
    margin-top: 30px;
}

div.back-btn-container button {
    color: var(--text-purple-header) !important;
    background-color: transparent !important;
    border: 1px solid var(--border-purple) !important;
    border-radius: var(--radius-pill) !important;
    padding: 4px 12px !important;
    font-size: var(--font-size-sm) !important;
    transition: all 0.2s ease !important;
}

div.back-btn-container button:hover {
    background-color: var(--primary-light) !important;
    border-color: var(--text-purple-header) !important;
}

/* ============================================================
 *  11. UTILITY CLASSES (필요 시 확장)
 * ============================================================ */
/* 추후 필요한 유틸리티 클래스 추가 예정 */